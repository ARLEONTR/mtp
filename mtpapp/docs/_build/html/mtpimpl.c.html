<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>&lt;no title&gt; &#8212; MTP: Mesh Transport Protocol 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script src="_static/documentation_options.js?v=d45e8c67"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="&lt;no title&gt;" href="mtpinst.c.html" />
    <link rel="prev" title="MTP" href="mtp.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <dl class="c function">
<dt class="sig sig-object c" id="c.MTP_load">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_load</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_load" title="Link to this definition">¶</a><br /></dt>
<dd><p>invoked when this module is loaded into the Linux kernel</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt><dd><p>no arguments</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success, otherwise a negative errno.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">void</span> <span class="pre">__exit</span> <span class="pre">MTP_unload</span> <span class="pre">(void)</span></span></dt>
<dd><p>invoked when this module is unloaded from the Linux kernel.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt><dd><p>no arguments</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_bind">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_bind</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">socket</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sock</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sockaddr</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">addr</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">addr_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_bind" title="Link to this definition">¶</a><br /></dt>
<dd><p>Implements the bind system call for MTP sockets: associates a well-known service port with a socket. Unlike other AF_INET6 protocols, there is no need to invoke this system call for sockets that are only used as clients.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">socket</span> <span class="pre">*sock</span></code></dt><dd><p>Socket on which the system call was invoked.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sockaddr</span> <span class="pre">*addr</span></code></dt><dd><p>Contains the desired port number.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">addr_len</span></code></dt><dd><p>Number of bytes in uaddr.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success, otherwise a negative errno.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_close">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_close</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span>, <span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n"><span class="pre">timeout</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_close" title="Link to this definition">¶</a><br /></dt>
<dd><p>Invoked when close system call is invoked on a MTP socket.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket being closed</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">timeout</span></code></dt><dd><p>??</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_shutdown">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_shutdown</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">socket</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sock</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">how</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_shutdown" title="Link to this definition">¶</a><br /></dt>
<dd><p>Implements the shutdown system call for MTP sockets.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">socket</span> <span class="pre">*sock</span></code></dt><dd><p>Socket to shut down.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">how</span></code></dt><dd><p>Ignored: for other sockets, can independently shut down
sending and receiving, but for MTP any shutdown will
shut down everything.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success, otherwise a negative errno.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_disconnect">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_disconnect</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">flags</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_disconnect" title="Link to this definition">¶</a><br /></dt>
<dd><p>Invoked when disconnect system call is invoked on a MTP socket.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket to disconnect</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">flags</span></code></dt><dd><p>??</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success, otherwise a negative errno.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_ioc_abort">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_ioc_abort</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n"><span class="pre">arg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_ioc_abort" title="Link to this definition">¶</a><br /></dt>
<dd><p>The top-level function for the ioctl that implements the MTP_abort user-level API.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket for this request.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">arg</span></code></dt><dd><p>Used to pass information from user space.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success, otherwise a negative errno.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_ioctl">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_ioctl</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">cmd</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_ioctl" title="Link to this definition">¶</a><br /></dt>
<dd><p>Implements the ioctl system call for MTP sockets.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket on which the system call was invoked.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">cmd</span></code></dt><dd><p>Identifier for a particular ioctl operation.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*arg</span></code></dt><dd><p>Operation-specific argument; typically the address of a block
of data in user address space.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success, otherwise a negative errno.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_socket">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_socket</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_socket" title="Link to this definition">¶</a><br /></dt>
<dd><p>Implements the socket(2) system call for sockets.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket on which the system call was invoked. The non-MTP
parts have already been initialized.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>always 0 (success).</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_setsockopt">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_setsockopt</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">level</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">optname</span></span>, <span class="n"><span class="pre">sockptr_t</span></span><span class="w"> </span><span class="n"><span class="pre">optval</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">optlen</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_setsockopt" title="Link to this definition">¶</a><br /></dt>
<dd><p>Implements the getsockopt system call for MTP sockets.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket on which the system call was invoked.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">level</span></code></dt><dd><p>Level at which the operation should be handled; will always
be IPPROTO_MTP.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">optname</span></code></dt><dd><p>Identifies a particular setsockopt operation.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sockptr_t</span> <span class="pre">optval</span></code></dt><dd><p>Address in user space of information about the option.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">optlen</span></code></dt><dd><p>Number of bytes of data at <strong>optval</strong>.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success, otherwise a negative errno.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">int</span> <span class="pre">MTP_getsockopt</span> <span class="pre">(struct</span> <span class="pre">sock</span> <span class="pre">*sk,</span> <span class="pre">int</span> <span class="pre">level,</span> <span class="pre">int</span> <span class="pre">optname,</span> <span class="pre">char</span> <span class="pre">__user</span> <span class="pre">*optval,</span> <span class="pre">int</span> <span class="pre">__user</span> <span class="pre">*option)</span></span></dt>
<dd><p>Implements the getsockopt system call for MTP sockets.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket on which the system call was invoked.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">level</span></code></dt><dd><p>??</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">optname</span></code></dt><dd><p>Identifies a particular setsockopt operation.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">__user</span> <span class="pre">*optval</span></code></dt><dd><p>Address in user space where the option’s value should be stored.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">__user</span> <span class="pre">*option</span></code></dt><dd><p>??.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success, otherwise a negative errno.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_sendmsg">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_sendmsg</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">msghdr</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">msg</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">length</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_sendmsg" title="Link to this definition">¶</a><br /></dt>
<dd><p>Send a request or response message on a MTP socket.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket on which the system call was invoked.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">msghdr</span> <span class="pre">*msg</span></code></dt><dd><p>Structure describing the message to send; the msg_control
field points to additional information.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">length</span></code></dt><dd><p>Number of bytes of the message.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success, otherwise a negative errno.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_recvmsg">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_recvmsg</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">msghdr</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">msg</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">len</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">flags</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">addr_len</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_recvmsg" title="Link to this definition">¶</a><br /></dt>
<dd><p>Receive a message from a MTP socket.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket on which the system call was invoked.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">msghdr</span> <span class="pre">*msg</span></code></dt><dd><p>Controlling information for the receive.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">len</span></code></dt><dd><p>Total bytes of space available in msg-&gt;msg_iov; not used.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">flags</span></code></dt><dd><p>Flags from system call, not including MSG_DONTWAIT; ignored.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*addr_len</span></code></dt><dd><p>Store the length of the sender address here</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<dl class="simple">
<dt>The length of the message on success, otherwise a negative</dt><dd><p>errno.</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_sendpage">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_sendpage</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.MTP_sendpage" title="page"><span class="n"><span class="pre">page</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">page</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">offset</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">size</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">flags</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_sendpage" title="Link to this definition">¶</a><br /></dt>
<dd><p>??.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket for the operation</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">page</span> <span class="pre">*page</span></code></dt><dd><p>??</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">offset</span></code></dt><dd><p>??</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt><dd><p>??</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">flags</span></code></dt><dd><p>??</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success, otherwise a negative errno.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_hash">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_hash</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_hash" title="Link to this definition">¶</a><br /></dt>
<dd><p>??.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket for the operation</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>??</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_unhash">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_unhash</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_unhash" title="Link to this definition">¶</a><br /></dt>
<dd><p>??.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket for the operation</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_rehash">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_rehash</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_rehash" title="Link to this definition">¶</a><br /></dt>
<dd><p>??.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket for the operation</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_get_port">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_get_port</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">short</span></span><span class="w"> </span><span class="n"><span class="pre">snum</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_get_port" title="Link to this definition">¶</a><br /></dt>
<dd><p>It appears that this function is called to assign a default port for a socket.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket for the operation</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">short</span> <span class="pre">snum</span></code></dt><dd><p>Unclear what this is.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Zero for success, or a negative errno for an error.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_diag_destroy">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_diag_destroy</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">err</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_diag_destroy" title="Link to this definition">¶</a><br /></dt>
<dd><p>??.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>Socket for the operation</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">err</span></code></dt><dd><p>??</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>??</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_v4_early_demux">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_v4_early_demux</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sk_buff</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">skb</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_v4_early_demux" title="Link to this definition">¶</a><br /></dt>
<dd><p>Invoked by IP for ??.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sk_buff</span> <span class="pre">*skb</span></code></dt><dd><p>Socket buffer.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Always 0?</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_v4_early_demux_handler">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_v4_early_demux_handler</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sk_buff</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">skb</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_v4_early_demux_handler" title="Link to this definition">¶</a><br /></dt>
<dd><p>invoked by IP for ??.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sk_buff</span> <span class="pre">*skb</span></code></dt><dd><p>Socket buffer.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Always 0?</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_softirq">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_softirq</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sk_buff</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">skb</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_softirq" title="Link to this definition">¶</a><br /></dt>
<dd><p>This function is invoked at SoftIRQ level to handle incoming packets.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sk_buff</span> <span class="pre">*skb</span></code></dt><dd><p>The incoming packet.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Always 0</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_backlog_rcv">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_backlog_rcv</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sock</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sk</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sk_buff</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">skb</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_backlog_rcv" title="Link to this definition">¶</a><br /></dt>
<dd><p>Invoked to handle packets saved on a socket’s backlog because it was locked when the packets first arrived.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sock</span> <span class="pre">*sk</span></code></dt><dd><p>MTP socket that owns the packet’s destination port.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sk_buff</span> <span class="pre">*skb</span></code></dt><dd><p>The incoming packet. This function takes ownership of the packet
(we’ll delete it).</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Always returns 0.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_err_handler_v4">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_err_handler_v4</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sk_buff</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">skb</span></span>, <span class="n"><span class="pre">u32</span></span><span class="w"> </span><span class="n"><span class="pre">info</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_err_handler_v4" title="Link to this definition">¶</a><br /></dt>
<dd><p>Invoked by IP to handle an incoming error packet, such as ICMP UNREACHABLE.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sk_buff</span> <span class="pre">*skb</span></code></dt><dd><p>The incoming packet.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">info</span></code></dt><dd><p>Information about the error that occurred?</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>zero, or a negative errno if the error couldn’t be handled here.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_err_handler_v6">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_err_handler_v6</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">sk_buff</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">skb</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">inet6_skb_parm</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">opt</span></span>, <span class="n"><span class="pre">u8</span></span><span class="w"> </span><span class="n"><span class="pre">type</span></span>, <span class="n"><span class="pre">u8</span></span><span class="w"> </span><span class="n"><span class="pre">code</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">offset</span></span>, <span class="n"><span class="pre">__be32</span></span><span class="w"> </span><span class="n"><span class="pre">info</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_err_handler_v6" title="Link to this definition">¶</a><br /></dt>
<dd><p>Invoked by IP to handle an incoming error packet, such as ICMP UNREACHABLE.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sk_buff</span> <span class="pre">*skb</span></code></dt><dd><p>The incoming packet.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">inet6_skb_parm</span> <span class="pre">*opt</span></code></dt><dd><p>options</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">type</span></code></dt><dd><p>type</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">code</span></code></dt><dd><p>code</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">offset</span></code></dt><dd><p>offset</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">__be32</span> <span class="pre">info</span></code></dt><dd><p>Information about the error that occurred?</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>zero, or a negative errno if the error couldn’t be handled here.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_poll">
<span class="n"><span class="pre">__poll_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_poll</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.MTP_poll" title="file"><span class="n"><span class="pre">file</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">file</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">socket</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sock</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">poll_table_struct</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">wait</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_poll" title="Link to this definition">¶</a><br /></dt>
<dd><p>Invoked by Linux as part of implementing select, poll, epoll, etc.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">file</span> <span class="pre">*file</span></code></dt><dd><p>Open file that is participating in a poll, select, etc.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">socket</span> <span class="pre">*sock</span></code></dt><dd><p>A MTP socket, associated with <strong>file</strong>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">poll_table_struct</span> <span class="pre">*wait</span></code></dt><dd><p>This table will be registered with the socket, so that it
is notified when the socket’s ready state changes.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<dl class="simple">
<dt>A mask of bits such as EPOLLIN, which indicate the current</dt><dd><p>state of the socket.</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_metrics_open">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_metrics_open</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.MTP_metrics_open" title="inode"><span class="n"><span class="pre">inode</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">inode</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.MTP_metrics_open" title="file"><span class="n"><span class="pre">file</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">file</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_metrics_open" title="Link to this definition">¶</a><br /></dt>
<dd><p>This function is invoked when /proc/net/MTP_metrics is opened.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">inode</span> <span class="pre">*inode</span></code></dt><dd><p>The inode corresponding to the file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">file</span> <span class="pre">*file</span></code></dt><dd><p>Information about the open file.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>always 0.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">ssize_t</span> <span class="pre">MTP_metrics_read</span> <span class="pre">(struct</span> <span class="pre">file</span> <span class="pre">*file,</span> <span class="pre">char</span> <span class="pre">__user</span> <span class="pre">*buffer,</span> <span class="pre">size_t</span> <span class="pre">length,</span> <span class="pre">loff_t</span> <span class="pre">*offset)</span></span></dt>
<dd><p>This function is invoked to handle read kernel calls on /proc/net/MTP_metrics.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">file</span> <span class="pre">*file</span></code></dt><dd><p>Information about the file being read.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">__user</span> <span class="pre">*buffer</span></code></dt><dd><p>Address in user space of the buffer in which data from the file
should be returned.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">length</span></code></dt><dd><p>Number of bytes available at <strong>buffer</strong>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">loff_t</span> <span class="pre">*offset</span></code></dt><dd><p>Current read offset within the file.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>the number of bytes returned at <strong>buffer</strong>. 0 means the end of the
file was reached, and a negative number indicates an error (-errno).</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_metrics_lseek">
<span class="n"><span class="pre">loff_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_metrics_lseek</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.MTP_metrics_lseek" title="file"><span class="n"><span class="pre">file</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">file</span></span>, <span class="n"><span class="pre">loff_t</span></span><span class="w"> </span><span class="n"><span class="pre">offset</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">whence</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_metrics_lseek" title="Link to this definition">¶</a><br /></dt>
<dd><p>This function is invoked to handle seeks on /proc/net/MTP_metrics. Right now seeks are ignored: the file must be read sequentially.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">file</span> <span class="pre">*file</span></code></dt><dd><p>Information about the file being read.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">loff_t</span> <span class="pre">offset</span></code></dt><dd><p>Distance to seek, in bytes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">whence</span></code></dt><dd><p>Starting point from which to measure the distance to seek.</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_metrics_release">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_metrics_release</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.MTP_metrics_release" title="inode"><span class="n"><span class="pre">inode</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">inode</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.MTP_metrics_release" title="file"><span class="n"><span class="pre">file</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">file</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_metrics_release" title="Link to this definition">¶</a><br /></dt>
<dd><p>This function is invoked when the last reference to an open /proc/net/MTP_metrics is closed. It performs cleanup.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">inode</span> <span class="pre">*inode</span></code></dt><dd><p>The inode corresponding to the file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">file</span> <span class="pre">*file</span></code></dt><dd><p>Information about the open file.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>always 0.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">int</span> <span class="pre">MTP_dointvec</span> <span class="pre">(struct</span> <span class="pre">ctl_table</span> <span class="pre">*table,</span> <span class="pre">int</span> <span class="pre">write,</span> <span class="pre">void</span> <span class="pre">__user</span> <span class="pre">*buffer,</span> <span class="pre">size_t</span> <span class="pre">*lenp,</span> <span class="pre">loff_t</span> <span class="pre">*ppos)</span></span></dt>
<dd><p>This function is a wrapper around proc_dointvec. It is invoked to read and write sysctl values and also update other values that depend on the modified value.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ctl_table</span> <span class="pre">*table</span></code></dt><dd><p>sysctl table describing value to be read or written.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">write</span></code></dt><dd><p>Nonzero means value is being written, 0 means read.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">__user</span> <span class="pre">*buffer</span></code></dt><dd><p>Address in user space of the input/output data.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">*lenp</span></code></dt><dd><p>Not exactly sure.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">loff_t</span> <span class="pre">*ppos</span></code></dt><dd><p>Not exactly sure.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 for success, nonzero for error.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c">
<span class="sig-name descname"><span class="pre">int</span> <span class="pre">MTP_sysctl_softirq_cores</span> <span class="pre">(struct</span> <span class="pre">ctl_table</span> <span class="pre">*table,</span> <span class="pre">int</span> <span class="pre">write,</span> <span class="pre">void</span> <span class="pre">__user</span> <span class="pre">*buffer,</span> <span class="pre">size_t</span> <span class="pre">*lenp,</span> <span class="pre">loff_t</span> <span class="pre">*ppos)</span></span></dt>
<dd><p>This function is invoked to handle sysctl requests for the “gen3_softirq_cores” target, which requires special processing.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ctl_table</span> <span class="pre">*table</span></code></dt><dd><p>sysctl table describing value to be read or written.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">write</span></code></dt><dd><p>Nonzero means value is being written, 0 means read.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">__user</span> <span class="pre">*buffer</span></code></dt><dd><p>Address in user space of the input/output data.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">*lenp</span></code></dt><dd><p>Not exactly sure.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">loff_t</span> <span class="pre">*ppos</span></code></dt><dd><p>Not exactly sure.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 for success, nonzero for error.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_hrtimer">
<span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="n"><span class="pre">hrtimer_restart</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_hrtimer</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">hrtimer</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">timer</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_hrtimer" title="Link to this definition">¶</a><br /></dt>
<dd><p>This function is invoked by the hrtimer mechanism to wake up the timer thread. Runs at IRQ level.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">hrtimer</span> <span class="pre">*timer</span></code></dt><dd><p>The timer that triggered; not used.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Always HRTIMER_RESTART.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.MTP_timer_main">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">MTP_timer_main</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">transportInfo</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.MTP_timer_main" title="Link to this definition">¶</a><br /></dt>
<dd><p>Top-level function for the timer thread.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*transportInfo</span></code></dt><dd><p>Pointer to struct MTP.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Always 0.</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">MTP: Mesh Transport Protocol</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mtp.html">MTP</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="mtp.html" title="previous chapter">MTP</a></li>
      <li>Next: <a href="mtpinst.c.html" title="next chapter">&lt;no title&gt;</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Ertan Onur.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/mtpimpl.c.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>